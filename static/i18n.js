(function () {
  const he = {
    title: "תמלול בעזרת ivrit.ai",
    themeToggle: "החלף מצב תאורה",
    settings: "הגדרות",
    language: "שפה",
    languageHebrew: "עברית",
    languageYiddish: "ייִדיש",
    languageEnglish: "אנגלית",
    dropPrompt: "גרור קובץ לכאן או לחץ לבחירת קובץ",
    transcribe: "תמלל",
    copyText: "העתק את הטקסט",
    downloads: "הורדות",
    downloadAs: "הורד כ...",
    wordDocx: "Word DOCX",
    contactUs: "רוצים ליצור קשר? אנחנו כאן",
    donateAsk: "רוצים לתרום לנו?",
    privacyTos: "מדיניות פרטיות ותנאי שימוש",
    settingsHeader: "הגדרות",
    settingsRunpod: "הגדרות RunPod",
    runpodKeyLabel: "RunPod API Key:",
    runpodKeyPlaceholder: "הכנס את ה-API Key שלך",
    runpodHelpWatch: "לצפייה בסרטון הסבר",
    runpodHelpText: "הזנת מפתח פרטי מאפשרת שימוש במשאבים פרטיים לעיבוד מהיר יותר.",
    settingsWithRunpodSaved: "הגדרות (הגדרות RunPod שמורות)",
    balanceLabel: "יתרה",
    loading: "טוען...",
    displaySettings: "הגדרות תצוגה",
    timestampsLabel: "קודי זמן:",
    timestampsNone: "ללא קודי זמן",
    timestampsNoneHelp: "רק הטקסט ללא זמנים",
    timestampsSegments: "כולל קודי זמן",
    timestampsSegmentsHelp: "זמני התחלה וסיום, לפי פורמט הטקסט",
    diarizationLabel: "הפרדת דוברים:",
    diarizationEnabled: "הצג דוברים",
    diarizationEnabledHelp: "הצג תוויות דוברים ושורות חדשות עם החלפת דובר",
    diarizationDisabled: "הסתר דוברים",
    diarizationDisabledHelp: "הצג רק טקסט ללא תוויות דוברים",
    save: "שמור",
    cancel: "ביטול",
    clear: "נקה הגדרות",
    fileSelected: "קובץ נבחר",
    fileSize: "גודל קובץ",
    removeFile: "הסר קובץ",
    saveAudioInDrive: "שמור אודיו ל-Google Drive",
    whatDoesThisMean: "מה זה אומר?",
    saveAudioInfoText: "שמירת קובץ השמע תאפשר בקרוב גם קריאה מתוזמנת של התמלול, יחד עם שמע מסונכרן.\n\nקובץ השמע נשמר על כונן גוגל שלך בלבד, לא על השרתים שלנו.",
    fileRemovedSuccess: "קובץ הוסר בהצלחה",
    fileSelectedSuccess: "קובץ נבחר בהצלחה",
    fileTooLarge: "הקובץ גדול מדי. הגודל המקסימלי המותר הוא {size}",
    usingRunpod: "משתמש בהגדרות RunPod מותאמות אישית...",
    uploading: "מעלה את הקובץ...",
    uploadingProgress: "מעלה את הקובץ... {progress}%",
    uploadedStarting: "קובץ הועלה. מתחיל בתמלול...",
    uploadError: "שגיאה בהעלאת הקובץ. אנא נסה שוב.",
    queuePosition: "בתור במקום {position}. זמן משוער להתחלה: {eta}",
    jobTypePrefix: "סוג עבודה: {jobType}",
    jobTypeShort: "קצרה",
    jobTypeLong: "ארוכה",
    jobTypePrivate: "פרטית",
    waitingMsg: "בזמן שאתם ממתינים, אנו מזכירים ש-ivrit.ai הוא פרויקט ללא מטרות רווח.\nכל השירותים שלנו, כולל שירות התמלול בו אתם משתמשים כרגע, ניתנים בחינם.\n\nנודה אם תוכלו לתרום בכדי שנוכל להנגיש את השירות ליותר משתמשים.\n\nניתן לתרום דרך לינק לפטראון בתחתית המסך.\n\nתודה!",
    transcribing: "מתמלל... {progress}%",
    statusError: "אירעה שגיאה בבדיקת סטטוס העבודה",
    verifyChecking: "בודק...",
    runpodSettingsSaved: "הגדרות RunPod נשמרו בהצלחה",
    runpodEndpointWait: "Endpoint חדש נוצר או עודכן. אנא המתן 3 דקות לפני העלאת קבצים.",
    settingsSaved: "הגדרות נשמרו בהצלחה",
    settingsCleared: "כל ההגדרות נמחקו בהצלחה",
    balanceLoadingError: "שגיאה בטעינה",
    runpodServerConnError: "שגיאה: לא ניתן להתחבר לשרת RunPod.\nאנא בדוק את החיבור לאינטרנט ונסה שוב.",
    runpodVerifyError: "שגיאה בבדיקת הגדרות RunPod.",
    endpointCheckError: "שגיאה בבדיקת ה-endpoint:",
    runpodTokenUnsavedWarning: 'מפתח ה-RunPod לא נשמר. לחץ על "שמור" כדי להחיל אותו.',
    errorReportTemplate: "אם השגיאה נמשכת, אנא שלחו דיווח לכתובת info@ivrit.ai עם הפרטים הבאים:\n- כתובת האימייל שלכם\n- זמן השגיאה: {time}\n- פרטי השגיאה: {details}",
    transcriptFooter: "תומלל באמצעות שירות התמלול של ivrit.ai",
    copySuccess: "הטקסט הועתק ללוח בהצלחה",
    docxLibMissing: "ספריית יצירת המסמך לא נטענה. בדקו את החיבור ונסו שוב.",
    docxCreateError: "שגיאה ביצירת קובץ Word. אנא נסה שוב.",
    exportError: "שגיאה בייצוא נתוני התמלול",
    exitWarning: "התמלול עדיין פעיל. יציאה מהדף תפסיק את התמלול. האם אתה בטוח שברצונך לצאת?",
    transcriptHeaderDocx: "תמלול",
    speaker: "דובר {num}",
    speakerUnknown: "דובר לא מזוהה",
    errorPrefix: "שגיאה",
    unitBytes: "Bytes",
    unitKB: "KB",
    unitMB: "MB",
    unitGB: "GB",
    textFormatSegmentsTitle: "פורמט הטקסט: פסקאות נפרדות",
    textFormatContinuousTitle: "פורמט הטקסט: טקסט רציף",
    filesSelectedCount: "{count} קבצים נבחרו",
    filesSelectedSuccess: "{count} קבצים נבחרו בהצלחה",
    batchStarting: "מתחיל עיבוד אצווה של {count} קבצים...",
    batchUploading: "מעלה {index}/{total}: {filename}",
    batchQueued: "בתור ({index}/{total}) {filename} · מקום {position} · זמן משוער: {eta}",
    batchTranscribing: "מתמלל ({index}/{total}) {filename} · {progress}%",
    batchDone: "האצווה הושלמה",
    docxDownloaded: "קובץ DOCX ירד: {filename}",
    tabTranscribe: "תמלול חדש",
    tabMyFiles: "הקבצים שלי",
    tabViewer: "צפייה",
    filesLoading: "טוען קבצים...",
    filesEmpty: "עדיין לא שמרת תמלולים",
    filesLoadError: "שגיאה בטעינת הקבצים",
    loadingFile: "טוען קובץ...",
    filesDownloading: "מוריד קובץ...",
    filesDownloadSuccess: "הקובץ הורד בהצלחה",
    filesDownloadError: "שגיאה בהורדת הקובץ",
    backToFiles: "חזרה לרשימה",
    renameFile: "שנה שם",
    fileRenamedSuccess: "השם שונה בהצלחה",
    renameError: "שגיאה בשינוי השם",
    saving: "שומר...",
    transcriptionQueued: "הקובץ נשלח לתמלול בהצלחה. התוצאות יופיעו ב\"הקבצים שלי\" כשיסתיימו.",
    batchFailed: "כל הקבצים נכשלו",
    deleteFile: "מחק קובץ",
    deleteConfirm: 'האם אתה בטוח שברצונך למחוק את "{filename}"?\n\nפעולה זו אינה הפיכה.',
    fileDeletedSuccess: "הקובץ נמחק בהצלחה",
    deleteError: "שגיאה במחיקת הקובץ",
    deleting: "מוחק...",
    // Server error messages
    errorJobAlreadyActive: "יש לך כבר עבודה בתור או בביצוע. אנא המתן לסיומה לפני העלאת קובץ חדש.",
    errorRateLimitExceeded: "עברת את מגבלת השימוש החופשי. אנא המתן {minutes} דקות לפני העלאת קובץ חדש, או השתמש במפתח פרטי בעזרת ההוראות בסרטון הבא: https://youtu.be/xr8RQRFERLs",
    errorFileTooLargeForFreeService: "הקובץ המבוקש גדול מדי ועובר את מגבלת השימוש החופשי הכוללת. אנא השתמש במפתח פרטי בעזרת ההוראות בסרטון הבא: https://youtu.be/xr8RQRFERLs",
    errorServerBusy: "השרת עמוס כרגע. אנא נסה שוב מאוחר יותר.",
    errorDrivePermissionsRequired: "השירות דורש הרשאות Google Drive כדי לשמור את התמלולים שלך. אנא אשר את כל ההרשאות המבוקשות כדי להמשיך.",
    errorServiceUnavailable: "השירות כרגע לא פעיל. אנא נסה שוב מאוחר יותר.",
    errorNoFileSelected: "לא נבחר קובץ. אנא בחר קובץ להעלאה.",
    errorEmptyFilename: "שם הקובץ ריק. אנא בחר קובץ תקין.",
    errorFileTooLarge: "הקובץ גדול מדי. הגודל המקסימלי המותר הוא {size}.",
    errorUploadFailed: "העלאת הקובץ נכשלה: {details}",
    errorUnsupportedFileType: "סוג הקובץ {type} אינו נתמך. אנא העלה קובץ אודיו או וידאו תקין.",
    errorCannotReadDuration: "לא ניתן לקרוא את משך הקובץ. אנא ודא שהקובץ תקין ונסה שוב.",
    errorFileTooLong: "הקובץ ארוך מדי. המשך המקסימלי המותר הוא {maxHours} שעות ({maxSeconds} שעות), אך הקובץ שלך הוא {fileHours} שעות.",
    errorTranscodingJobActive: "יש לך כבר עבודה בתהליך המרה. אנא המתן לסיומה לפני העלאת קובץ חדש.",
    errorDriveNotConnected: "לא זוהה חיבור ל-Google Drive. אנא התחבר מחדש.",
    errorDrivePermissionsInsufficient: "הרשאות Google Drive חסרות. אנא התנתק והתחבר מחדש כדי לאשר גישה לדרייב.",
    errorDriveAccessFailed: "שגיאה בגישה ל-Google Drive. אנא נסה שוב מאוחר יותר.",
    errorDriveUnavailable: "לא ניתן לגשת ל-Google Drive. אנא התחבר מחדש.",
    errorLanguageRequiresPrivateKey: "שפה זו זמינה רק לשימוש עם מפתח RunPod פרטי.",
    errorEndpointCheckFailed: "שגיאה בבדיקת ה-endpoint: {details}",
    errorEndpointCreated: "נוצר endpoint חדש עבור המפתח שלך. אנא המתן 3 דקות לפני העלאת קבצים.",
    errorEndpointUpdated: "ה-endpoint שלך עודכן. אנא המתן 3 דקות לפני העלאת קבצים.",
    errorMissingSaveAudio: "Missing save_audio parameter",
    errorMissingLanguage: "Missing language",
    errorUnsupportedLanguage: "Unsupported language",
    errorMissingRunpodToken: "Missing RunPod token",
    errorNotAuthenticated: "Not authenticated with Google Drive",
    errorUserEmailNotFound: "User email not found",
    errorTocLoadFailed: "Failed to load TOC",
    errorResultsNotFound: "Results file not found",
    errorResultsDownloadFailed: "Failed to download results",
    errorAudioNotFound: "Audio file not found",
    errorAudioDownloadFailed: "Failed to download audio",
    errorMissingResultsId: "Missing results_id",
    errorMissingNewFilename: "Missing results_id or new_filename",
    errorFilenameEmpty: "Filename cannot be empty",
    errorFileNotInToc: "File not found in TOC",
    errorTocUpdateFailed: "Failed to update TOC",
    errorInternalServer: "Internal server error",
    errorBalanceFetchFailed: "Failed to fetch balance",
    errorInvalidJson: "Invalid JSON body",
    errorMissingFileSize: "Missing file_size",
    errorInvalidFileSize: "Invalid file_size",
  }

  const yi = {
    title: "טראַנסקריפּציע דורך ivrit.ai",
    themeToggle: "באַשטייערן ליכט/טונקל מאָדע",
    settings: "איינשטעלונגען",
    language: "שפּראַך",
    languageHebrew: "עברית",
    languageYiddish: "ייִדיש",
    languageEnglish: "ענגליש",
    dropPrompt: "ציע לאָז דאָ אַ טעקע אָדער דריקט צו אויסקלייבן",
    transcribe: "טראַנסקריבער",
    copyText: "קאָפּירן דעם טעקסט",
    downloads: "אַראָפלאָדן",
    downloadAs: "אַראָפלאָדן ווי...",
    wordDocx: "Word DOCX",
    contactUs: "ווילט איר זיך קאָנטאַקטירן? מיר זײַנען דאָ",
    donateAsk: "ווילט איר אונדז שטיצן?",
    privacyTos: "פּריוואַטקייט פּאָליסי און תנאי־ניצול",
    settingsHeader: "איינשטעלונגען",
    settingsRunpod: "RunPod איינשטעלונגען",
    runpodKeyLabel: "RunPod API קלעף:",
    runpodKeyPlaceholder: "אַרײַנלייגן אייערן API קלעף",
    runpodHelpWatch: "קוקן דערקלער־ווידעא",
    runpodHelpText: "אַ פּערזענלעכער שליסל דערמעגלעכט שנעלערע באַהאַנדלונג אויף אייערע רעסורסן.",
    settingsWithRunpodSaved: "איינשטעלונגען (RunPod־אויפֿהיטונגען אַנטהאַלטן)",
    balanceLabel: "באַלאַנס",
    loading: "לאָדט...",
    displaySettings: "וויזועל־איינשטעלונגען",
    timestampsLabel: "צײַט־קאָדן:",
    timestampsNone: "אָן צײַט־קאָדן",
    timestampsNoneHelp: "בלויז דער טעקסט אָן צײַטן",
    timestampsSegments: "מיט צײַט־קאָדן",
    timestampsSegmentsHelp: "אָנפֿאַנג און סוף, לויט פֿאָרמאַט",
    diarizationLabel: "אָפּטיילונג פֿון רעדנדיקע:",
    diarizationEnabled: "ווײַזן רעדנדיקע",
    diarizationEnabledHelp: "ווײַזן טאַגלען און נײַע שורות בײַ טויש",
    diarizationDisabled: "באַהאַלטן רעדנדיקע",
    diarizationDisabledHelp: "ווײַזן בלויז טעקסט אָן טאַגלען",
    save: "אויפֿהיטן",
    cancel: "אַנולירן",
    clear: "באַוואַרפֿן איינשטעלונגען",
    fileSelected: "דערקליבענע טעקע",
    fileSize: "טעקע־גרייס",
    removeFile: "אויסמעקן טעקע",
    saveAudioInDrive: "היט אַודיאָ צו Google Drive",
    whatDoesThisMean: "וואָס הייסט דאָס?",
    saveAudioInfoText: "אויפֿהיטן די קלאַנג־טעקע וועט באַלד אויך דערמעגלעכן אַ סינכראָניזירטע לייענען פֿון דער טראַנסקריפּציע, מיט דער קלאַנג.\n\nדי קלאַנג־טעקע ווערט אויפֿגעהיט נאָר אויף דײַן Google כונן, נישט אויף אונדזערע סערווירערס.",
    fileRemovedSuccess: "טעקע איז געלאָשן געוואָרן מיט הצלחה",
    fileSelectedSuccess: "טעקע איז געראָטן אויסגעקליבן",
    fileTooLarge: "די טעקע איז צו גרויַס. מעגלעכער העכסטער איז {size}",
    usingRunpod: "נוצט פּערזענלעכע RunPod איינשטעלונגען...",
    uploading: "אַרויפֿלאָדט די טעקע...",
    uploadingProgress: "אַרויפֿלאָדט די טעקע... {progress}%",
    uploadedStarting: "טעקע אַרויפֿגעלאָדן. הייבט אָן טראַנסקריפּציע...",
    uploadError: "א טעות בעת אַרויפֿלאָדן. ביטע פּרוּווט נאָך אַ מאָל.",
    queuePosition: "אין דער ריי אָרט {position}. אַפּראָקס. אָנהייב־צײַט: {eta}",
    jobTypePrefix: "אַרבעט־סאָרט: {jobType}",
    jobTypeShort: "קורץ",
    jobTypeLong: "לאַנג",
    jobTypePrivate: "פּריוואַט",
    waitingMsg: "ווען איר וואַרט, געדענקט אַז ivrit.ai איז אַ נאַן־פּראָפֿיט.\nאַלע אונדזערע דינען, אַרײַנגערעכנט דעם טראַנסקריפּציע־דינסט, זײַנען בחינם.\n\nביטע שטיצט אונדז כּדי צוצוגעבן דעם דינסט פאר מער ניצערס.\n\nמען קען שטיצן דורך פּאַטרעאָן לינק אונטן.\n\nאַ דאַנק!",
    transcribing: "טראַנסקריבירט... {progress}%",
    statusError: "א טעות בײַם קאָנטראָלירן אַרבעט־סטאַטוס",
    verifyChecking: "באַשטעטיקט...",
    runpodSettingsSaved: "RunPod איינשטעלונגען געוואָרן געראַטעוועט",
    runpodEndpointWait: "אַנדערש אַ נײַער/דערהײַנטיקער Endpoint. וואַרטט 3 מינוט פֿריִער",
    settingsSaved: "איינשטעלונגען געראַטעוועט",
    settingsCleared: "אַלע איינשטעלונגען ווערן געלייגט צוריק",
    balanceLoadingError: "טעות בײַם לאָדן",
    runpodServerConnError: "טעות: מ׳קען זיך נישט פֿאַרבינדן צו RunPod סערוויר.\nביטע פּרוּווט ווידער.",
    runpodVerifyError: "טעות בײַם באַשטעטיקן RunPod איינשטעלונגען.",
    endpointCheckError: "טעות בײַם קאָנטראָלירן Endpoint:",
    runpodTokenUnsavedWarning: 'RunPod קלעף איז נישט אויפֿגעהיט. דריקט "אויפֿהיטן" כדי עס צו אַקטיוויזירן.',
    errorReportTemplate: "אויב דער טעות בלײַבט, ביטע שיקט אַ רעפּאָרט צו info@ivrit.ai מיט די דעטאַלן:\n- אייער אימעיל־אַדרעס\n- צײַט פֿון טעות: {time}\n- דעטאַלן: {details}",
    transcriptFooter: "טראַנסקריבירט דורך ivrit.ai'ס דינסט",
    copySuccess: "טעקסט איז קאַפּירט געוואָרן",
    docxLibMissing: "די דאָקומענט־ביבליאָטעק איז נישט געלאָדן. פּרוּווט ווידער.",
    docxCreateError: "טעות בײַם שאַפֿן Word טעקע. פּרוּווט ווידער.",
    exportError: "טעות בײַם אַן־פיר פֿון טראַנסקריפּציע־דאַטן",
    exitWarning: "טראַנסקריפּציע לויפֿט נאָך. אַרויסגיין וועט אָפּשטעלן. זענט איר זיכער?",
    transcriptHeaderDocx: "טראַנסקריפּציע",
    speaker: "רעדנדיקער {num}",
    speakerUnknown: "ניט־ידענטיפֿיצירטער רעדנדיקער",
    errorPrefix: "טעות",
    unitBytes: "Bytes",
    unitKB: "KB",
    unitMB: "MB",
    unitGB: "GB",
    textFormatSegmentsTitle: "טעקסט־פֿאָרמאַט: באַזונדערע פּאַראַגראַפֿן",
    textFormatContinuousTitle: "טעקסט־פֿאָרמאַט: קאַנטיניואַלע שורה",
    filesSelectedCount: "{count} טעקעס אויסגעקליבן",
    filesSelectedSuccess: "{count} טעקעס געראָטן אויסגעקליבן",
    batchStarting: "הייבט אָן אַ באַטש פֿון {count} טעקעס...",
    batchUploading: "אַרויפֿלאָדט {index}/{total}: {filename}",
    batchQueued: "אין ריי ({index}/{total}) {filename} · אָרט {position} · אַפּראָקס. {eta}",
    batchTranscribing: "טראַנסקריבירט ({index}/{total}) {filename} · {progress}%",
    batchDone: "באַטש פאַרענדיקט",
    docxDownloaded: "DOCX אַראָפּלאָדן: {filename}",
    tabTranscribe: "נײַע טראַנסקריפּציע",
    tabMyFiles: "מײַנע טעקעס",
    tabViewer: "באַקוקן",
    filesLoading: "לאָדט טעקעס...",
    filesEmpty: "איר האָט נאָך נישט אויפֿגעהיט טראַנסקריפּציעס",
    filesLoadError: "טעות בײַם לאָדן טעקעס",
    loadingFile: "לאָדט טעקע...",
    filesDownloading: "אַראָפּלאָדט טעקע...",
    filesDownloadSuccess: "טעקע אַראָפּלאָדן געראָטן",
    filesDownloadError: "טעות בײַם אַראָפּלאָדן טעקע",
    backToFiles: "צוריק צו רשימה",
    renameFile: "בײַטן נאָמען",
    fileRenamedSuccess: "נאָמען געענדערט געראָטן",
    renameError: "טעות בײַם ענדערן נאָמען",
    saving: "היט אַוועק...",
    transcriptionQueued: "די טעקע איז געשיקט געוואָרן צו טראַנסקריבירן. רעזולטאַטן וועלן זיך באַווײַזן אין 'מײַנע טעקעס' ווען פֿאַרענדיקט.",
    batchFailed: "אַלע טעקעס האָבן דורכגעפֿאַלן",
    deleteFile: "אויסמעקן טעקע",
    deleteConfirm: 'ביסטו זיכער אַז דו ווילסט אויסמעקן "{filename}"?\n\nדאָס איז ניט צוריקצודרייען.',
    fileDeletedSuccess: "טעקע איז אויסגעמעקט געוואָרן",
    deleteError: "טעות בײַם אויסמעקן טעקע",
    deleting: "אויסמעקט...",
    // Server error messages
    errorJobAlreadyActive: "איר האָט שוין אַ אַרבעט אין ריי אָדער אין פּראָצעס. ביטע וואַרט ביז זי ענדיקט זיך איידער איר לאָדט אַרויף אַ נײַער טעקע.",
    errorRateLimitExceeded: "איר האָט איבערגעגאַנגען די פֿרײַ־ניצונג־ליבמיט. ביטע וואַרט {minutes} מינוט איידער איר לאָדט אַרויף אַ נײַער טעקע, אָדער ניצט אַ פּריוואַטן שליסל לויט די אינסטרוקציעס אין ווידעא: https://youtu.be/xr8RQRFERLs",
    errorFileTooLargeForFreeService: "דער געבעטענער טעקע איז צו גרויס און גייט איבער די געזאַמטע פֿרײַ־ניצונג־לימיט. ביטע ניצט אַ פּריוואַטן שליסל לויט די אינסטרוקציעס אין ווידעא: https://youtu.be/xr8RQRFERLs",
    errorServerBusy: "דער סערווער איז איצט פֿאַרנומען. ביטע פּרוּווט ווידער שפּעטער.",
    errorDrivePermissionsRequired: "דער דינסט דאַרף Google Drive רשות כּדי צו היטן אייערע טראַנסקריפּציעס. ביטע באַשטעטיקט אַלע געבעטענע רשויות כּדי צו פֿאָרזעצן.",
    errorServiceUnavailable: "דער דינסט איז דערווײַלע נישט פֿאַרהאַן. ביטע פּרוּווט ווידער שפּעטער.",
    errorNoFileSelected: "קיין טעקע איז נישט אויסגעקליבן געוואָרן. ביטע קלײַבט אויס אַ טעקע צו אַרויפֿלאָדן.",
    errorEmptyFilename: "דער טעקע־נאָמען איז ליידיק. ביטע קלײַבט אויס אַ גילטיקע טעקע.",
    errorFileTooLarge: "די טעקע איז צו גרויס. דער מעגלעכער העכסטער איז {size}.",
    errorUploadFailed: "אַרויפֿלאָדן האָט דורכגעפֿאַלן: {details}",
    errorUnsupportedFileType: "טעקע־סאָרט {type} איז נישט געשטיצט. ביטע לאָדט אַרויף אַ גילטיק אַודיאָ אָדער ווידעא טעקע.",
    errorCannotReadDuration: "מ׳קען נישט אויסלייענען די לענג פֿון דער טעקע. ביטע פֿאַרזיכערט אַז די טעקע איז גילטיק און פּרוּווט ווידער.",
    errorFileTooLong: "די טעקע איז צו לאַנג. די מעגלעכע העכסטע לענג איז {maxHours} שעה ({maxSeconds} שעה), אָבער אייער טעקע איז {fileHours} שעה.",
    errorTranscodingJobActive: "איר האָט שוין אַ אַרבעט אין קאָנווערסיע־פּראָצעס. ביטע וואַרט ביז זי ענדיקט זיך איידער איר לאָדט אַרויף אַ נײַער טעקע.",
    errorDriveNotConnected: "קיין פֿאַרבינדונג צו Google Drive איז נישט געפֿונען געוואָרן. ביטע פֿאַרבינדט זיך פֿון נײַעם.",
    errorDrivePermissionsInsufficient: "Google Drive רשויות פֿעלן. ביטע אָפּזאָגט זיך און פֿאַרבינדט זיך פֿון נײַעם כּדי צו באַשטעטיקן צוטריט צום דרײַוו.",
    errorDriveAccessFailed: "טעות בײַם צוטריט צו Google Drive. ביטע פּרוּווט ווידער שפּעטער.",
    errorDriveUnavailable: "מ׳קען נישט צוגיין צו Google Drive. ביטע פֿאַרבינדט זיך פֿון נײַעם.",
    errorLanguageRequiresPrivateKey: "די שפּראַך איז בלויז פֿאַראַן מיט אַ פּריוואַטן RunPod שליסל.",
    errorEndpointCheckFailed: "טעות בײַם קאָנטראָלירן Endpoint: {details}",
    errorEndpointCreated: "אַ נײַער Endpoint איז געשאַפֿן געוואָרן פֿאַר אייער שליסל. ביטע וואַרט 3 מינוט איידער איר לאָדט אַרויף טעקעס.",
    errorEndpointUpdated: "אייער Endpoint איז דערהײַנטיקט געוואָרן. ביטע וואַרט 3 מינוט איידער איר לאָדט אַרויף טעקעס.",
    errorMissingSaveAudio: "פֿעלנדיק save_audio פּאַראַמעטער",
    errorMissingLanguage: "פֿעלנדיק שפּראַך",
    errorUnsupportedLanguage: "ניט־געשטיצטע שפּראַך",
    errorMissingRunpodToken: "פֿעלנדיק RunPod טאָקען",
    errorNotAuthenticated: "נישט אױטענטיפֿיצירט מיט Google Drive",
    errorUserEmailNotFound: "באַניצער־אימעיל נישט געפֿונען",
    errorTocLoadFailed: "דורכגעפֿאַלן צו לאָדן TOC",
    errorResultsNotFound: "רעזולטאַטן־טעקע נישט געפֿונען",
    errorResultsDownloadFailed: "דורכגעפֿאַלן צו אַראָפּלאָדן רעזולטאַטן",
    errorAudioNotFound: "אַודיאָ־טעקע נישט געפֿונען",
    errorAudioDownloadFailed: "דורכגעפֿאַלן צו אַראָפּלאָדן אַודיאָ",
    errorMissingResultsId: "פֿעלנדיק results_id",
    errorMissingNewFilename: "פֿעלנדיק results_id אָדער new_filename",
    errorFilenameEmpty: "טעקע־נאָמען קען נישט זײַן ליידיק",
    errorFileNotInToc: "טעקע נישט געפֿונען אין TOC",
    errorTocUpdateFailed: "דורכגעפֿאַלן צו דערהײַנטיקן TOC",
    errorInternalServer: "אינערלעכער סערווער־טעות",
    errorBalanceFetchFailed: "דורכגעפֿאַלן צו ברענגען באַלאַנס",
    errorInvalidJson: "אומגילטיק JSON בלאָק",
    errorMissingFileSize: "פֿעלנדיק file_size",
    errorInvalidFileSize: "אומגילטיק file_size",
  }

  const en = {
    title: "Transcription by ivrit.ai",
    themeToggle: "Toggle light/dark mode",
    settings: "Settings",
    language: "Language",
    languageHebrew: "Hebrew",
    languageYiddish: "Yiddish",
    languageEnglish: "English",
    dropPrompt: "Drag a file here or click to choose",
    transcribe: "Transcribe",
    copyText: "Copy text",
    downloads: "Downloads",
    downloadAs: "Download as...",
    wordDocx: "Word DOCX",
    contactUs: "Want to contact us? We're here",
    donateAsk: "Want to support us?",
    privacyTos: "Privacy Policy and Terms of Use",
    settingsHeader: "Settings",
    settingsRunpod: "RunPod Settings",
    runpodKeyLabel: "RunPod API Key:",
    runpodKeyPlaceholder: "Enter your API Key",
    runpodHelpWatch: "Watch tutorial video",
    runpodHelpText: "Using a private key lets you use your private resources for faster processing.",
    settingsWithRunpodSaved: "Settings (RunPod settings saved)",
    balanceLabel: "Balance",
    loading: "Loading...",
    displaySettings: "Display settings",
    timestampsLabel: "Timestamps:",
    timestampsNone: "No timestamps",
    timestampsNoneHelp: "Only text without times",
    timestampsSegments: "Include timestamps",
    timestampsSegmentsHelp: "Start and end times, per text format",
    diarizationLabel: "Speaker separation:",
    diarizationEnabled: "Show speakers",
    diarizationEnabledHelp: "Show speaker labels and break lines on change",
    diarizationDisabled: "Hide speakers",
    diarizationDisabledHelp: "Show only text without speaker labels",
    save: "Save",
    cancel: "Cancel",
    clear: "Clear settings",
    fileSelected: "File selected",
    fileSize: "File size",
    removeFile: "Remove file",
    saveAudioInDrive: "Save audio to Google Drive",
    whatDoesThisMean: "What does this mean?",
    saveAudioInfoText: "Saving the audio file will soon enable synchronized reading of the transcription along with the audio.\n\nThe audio file is saved only on your Google Drive, not on our servers.",
    fileRemovedSuccess: "File removed successfully",
    fileSelectedSuccess: "File selected successfully",
    fileTooLarge: "File too large. Maximum allowed is {size}",
    usingRunpod: "Using custom RunPod settings...",
    uploading: "Uploading file...",
    uploadingProgress: "Uploading file... {progress}%",
    uploadedStarting: "File uploaded. Starting transcription...",
    uploadError: "Upload error. Please try again.",
    queuePosition: "In queue position {position}. Estimated start: {eta}",
    jobTypePrefix: "Job type: {jobType}",
    jobTypeShort: "short",
    jobTypeLong: "long",
    jobTypePrivate: "private",
    waitingMsg: "While you wait, note ivrit.ai is a non-profit. All our services, including this transcription service, are free.\n\nPlease consider supporting us so we can make this service available to more users.\n\nYou can support via the Patreon link at the bottom of the page.\n\nThank you!",
    transcribing: "Transcribing... {progress}%",
    statusError: "An error occurred while checking job status",
    verifyChecking: "Checking...",
    runpodSettingsSaved: "RunPod settings saved",
    runpodEndpointWait: "A new/updated endpoint is being prepared. Please wait 3 minutes before uploading.",
    settingsSaved: "Settings saved",
    settingsCleared: "All settings were cleared",
    balanceLoadingError: "Loading error",
    runpodServerConnError: "Error: cannot connect to RunPod server. Please check your connection and try again.",
    runpodVerifyError: "Error verifying RunPod settings.",
    endpointCheckError: "Error checking endpoint:",
    runpodTokenUnsavedWarning: 'RunPod token not saved. Click "Save" to apply.',
    errorReportTemplate: "If the error persists, please email info@ivrit.ai with:\n- Your email address\n- Error time: {time}\n- Error details: {details}",
    transcriptFooter: "Transcribed using ivrit.ai's transcription service",
    copySuccess: "Text copied to clipboard",
    docxLibMissing: "Document library not loaded. Check connection and try again.",
    docxCreateError: "Error creating Word file. Please try again.",
    exportError: "Error exporting transcription data",
    exitWarning: "Transcription is still running. Leaving will stop it. Are you sure you want to leave?",
    transcriptHeaderDocx: "Transcription",
    speaker: "Speaker {num}",
    speakerUnknown: "Unknown speaker",
    errorPrefix: "Error",
    unitBytes: "Bytes",
    unitKB: "KB",
    unitMB: "MB",
    unitGB: "GB",
    textFormatSegmentsTitle: "Text format: separate paragraphs",
    textFormatContinuousTitle: "Text format: continuous text",
    filesSelectedCount: "{count} files selected",
    filesSelectedSuccess: "{count} files selected successfully",
    batchStarting: "Starting batch of {count} files...",
    batchUploading: "Uploading {index}/{total}: {filename}",
    batchQueued: "Queued ({index}/{total}) {filename} · position {position} · ETA {eta}",
    batchTranscribing: "Transcribing ({index}/{total}) {filename} · {progress}%",
    batchDone: "Batch complete",
    docxDownloaded: "DOCX downloaded: {filename}",
    tabTranscribe: "New Transcription",
    tabMyFiles: "My Files",
    tabViewer: "Viewer",
    filesLoading: "Loading files...",
    filesEmpty: "You haven't saved any transcriptions yet",
    filesLoadError: "Error loading files",
    loadingFile: "Loading file...",
    filesDownloading: "Downloading file...",
    filesDownloadSuccess: "File downloaded successfully",
    filesDownloadError: "Error downloading file",
    backToFiles: "Back to list",
    renameFile: "Rename",
    fileRenamedSuccess: "File renamed successfully",
    renameError: "Error renaming file",
    saving: "Saving...",
    transcriptionQueued: "File sent for transcription successfully. Results will appear in 'My Files' when complete.",
    batchFailed: "All files failed",
    deleteFile: "Delete file",
    deleteConfirm: 'Are you sure you want to delete "{filename}"?\n\nThis action cannot be undone.',
    fileDeletedSuccess: "File deleted successfully",
    deleteError: "Error deleting file",
    deleting: "Deleting...",
    // Server error messages
    errorJobAlreadyActive: "You already have a job queued or in progress. Please wait for it to complete before uploading a new file.",
    errorRateLimitExceeded: "You have exceeded the free usage limit. Please wait {minutes} minutes before uploading a new file, or use a private key following the instructions in this video: https://youtu.be/xr8RQRFERLs",
    errorFileTooLargeForFreeService: "The requested file is too large and exceeds the total free usage limit. Please use a private key following the instructions in this video: https://youtu.be/xr8RQRFERLs",
    errorServerBusy: "The server is currently busy. Please try again later.",
    errorDrivePermissionsRequired: "The service requires Google Drive permissions to save your transcriptions. Please approve all requested permissions to continue.",
    errorServiceUnavailable: "The service is currently unavailable. Please try again later.",
    errorNoFileSelected: "No file selected. Please choose a file to upload.",
    errorEmptyFilename: "The filename is empty. Please choose a valid file.",
    errorFileTooLarge: "File too large. The maximum allowed size is {size}.",
    errorUploadFailed: "File upload failed: {details}",
    errorUnsupportedFileType: "File type {type} is not supported. Please upload a valid audio or video file.",
    errorCannotReadDuration: "Cannot read file duration. Please ensure the file is valid and try again.",
    errorFileTooLong: "File is too long. The maximum allowed duration is {maxHours} hours ({maxSeconds} hours), but your file is {fileHours} hours.",
    errorTranscodingJobActive: "You already have a file being converted. Please wait for it to complete before uploading a new file.",
    errorDriveNotConnected: "No connection to Google Drive detected. Please reconnect.",
    errorDrivePermissionsInsufficient: "Google Drive permissions are insufficient. Please disconnect and reconnect to authorize Drive access.",
    errorDriveAccessFailed: "Error accessing Google Drive. Please try again later.",
    errorDriveUnavailable: "Cannot access Google Drive. Please reconnect.",
    errorLanguageRequiresPrivateKey: "This language is only available for use with a private RunPod key.",
    errorEndpointCheckFailed: "Error checking endpoint: {details}",
    errorEndpointCreated: "A new endpoint was created for your key. Please wait 3 minutes before uploading files.",
    errorEndpointUpdated: "Your endpoint has been updated. Please wait 3 minutes before uploading files.",
    errorMissingSaveAudio: "Missing save_audio parameter",
    errorMissingLanguage: "Missing language",
    errorUnsupportedLanguage: "Unsupported language",
    errorMissingRunpodToken: "Missing RunPod token",
    errorNotAuthenticated: "Not authenticated with Google Drive",
    errorUserEmailNotFound: "User email not found",
    errorTocLoadFailed: "Failed to load TOC",
    errorResultsNotFound: "Results file not found",
    errorResultsDownloadFailed: "Failed to download results",
    errorAudioNotFound: "Audio file not found",
    errorAudioDownloadFailed: "Failed to download audio",
    errorMissingResultsId: "Missing results_id",
    errorMissingNewFilename: "Missing results_id or new_filename",
    errorFilenameEmpty: "Filename cannot be empty",
    errorFileNotInToc: "File not found in TOC",
    errorTocUpdateFailed: "Failed to update TOC",
    errorInternalServer: "Internal server error",
    errorBalanceFetchFailed: "Failed to fetch balance",
    errorInvalidJson: "Invalid JSON body",
    errorMissingFileSize: "Missing file_size",
    errorInvalidFileSize: "Invalid file_size",
  }

  const resources = { he, yi, en }

  function interpolate(template, vars) {
    return String(template).replace(/\{(.*?)\}/g, (_, k) =>
      Object.prototype.hasOwnProperty.call(vars || {}, k) ? vars[k] : `{${k}}`
    )
  }

  const I18N = {
    current: 'he',
    setLanguage(lang) {
      this.current = resources[lang] ? lang : 'he'
      try {
        localStorage.setItem('ui_lang', this.current)
      } catch {}
      document.documentElement.setAttribute('lang', this.current)
      const rtlLangs = ['he', 'yi']
      document.documentElement.setAttribute('dir', rtlLangs.includes(this.current) ? 'rtl' : 'ltr')
    },
    t(key, vars) {
      const langTable = resources[this.current] || resources['he']
      const base = (langTable && langTable[key]) || (resources['he'] && resources['he'][key]) || key
      return interpolate(base, vars)
    },
    apply() {
      const langTable = resources[this.current] || resources['he']
      try { document.title = this.t('title') } catch {}
      document.querySelectorAll('[data-i18n]').forEach((el) => {
        const key = el.getAttribute('data-i18n')
        if (!key) return
        const val = this.t(key)
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.setAttribute('placeholder', val)
        } else {
          el.textContent = val
        }
      })
      document.querySelectorAll('[data-i18n-title]').forEach((el) => {
        const key = el.getAttribute('data-i18n-title')
        el.setAttribute('title', this.t(key))
        el.setAttribute('aria-label', this.t(key))
      })
    },
  }

  window.I18N = I18N
  // Initialize language from storage or default
  try {
    const saved = localStorage.getItem('ui_lang') || 'he'
    I18N.setLanguage(saved)
  } catch {
    I18N.setLanguage('he')
  }
})()


