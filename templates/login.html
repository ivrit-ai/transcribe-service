<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>התחברות - שירות התמלול החופשי של ivrit.ai</title>
    <script>
    function openLoginWindow() {
        var width = 600;
        var height = 600;
        var left = (screen.width / 2) - (width / 2);
        var top = (screen.height / 2) - (height / 2);
        
        var loginUrl = '{{ url_for('authorize', _external=True) }}';
        
        window.open(loginUrl, 'GoogleLogin', 'width=' + width + ',height=' + height + ',top=' + top + ',left=' + left);
    }

    // Listen for messages from the popup window
    window.addEventListener('message', function(event) {
        if (event.origin !== window.location.origin) return;
        
        if (event.data.type === 'login_success') {
            // Redirect to the main page or refresh the current page
            window.location.href = '{{ url_for('index') }}';
        }
    }, false);
    </script>
</head>
<body>
    <div class="container">
        <h1>ברוכים הבאים לשירות התמלול החופשי של ivrit.ai!</h1>
        <p>למען שמירה על איכות השירות, נודה שתתחברו בעזרת חשבון גוגל.</p>
        <p>רוצים לדעת עוד על הפרויקט? מוזמנים לקרוא עוד ב-<a href="https://ivrit.ai" target="_blank">ivrit.ai</a>.</p>
        <p>קראתי את <a href="https://www.ivrit.ai/en/privacy/" target="_blank">מסמך הפרטיות ותנאי השימוש</a>, ואני מאשר/ת אותו.</p>
        <p>בנוסף, אני מאשר/ת ליצור איתי קשר בנושאים הקשורים לפרויקט.</p>
        <div class="login-button">
            <img src="https://developers.google.com/identity/images/btn_google_signin_dark_normal_web.png" 
                 alt="Sign in with Google" 
                 onclick="openLoginWindow()" 
                 style="cursor: pointer;">
        </div>
    </div>
</body>
</html>
